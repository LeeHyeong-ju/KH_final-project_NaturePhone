# ğŸŒ± NaturePhone (ì¤‘ê³ í° ê±°ë˜ ì‚¬ì´íŠ¸)


## ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ë‹´ë‹¹ ê¸°ëŠ¥ êµ¬í˜„ í™”ë©´](#ë‹´ë‹¹-ê¸°ëŠ¥-êµ¬í˜„-í™”ë©´)
3. [íŒ¨í‚¤ì§€ë³„ êµ¬í˜„ ê¸°ëŠ¥](#íŒ¨í‚¤ì§€ë³„-êµ¬í˜„-ê¸°ëŠ¥)
4. [ê¸°ëŠ¥ êµ¬í˜„ì˜ ê³ ë¯¼ì ê³¼ í•´ê²° ê³¼ì •](#ê¸°ëŠ¥-êµ¬í˜„ì˜-ê³ ë¯¼ì ê³¼-í•´ê²°-ê³¼ì •)

## í”„ë¡œì íŠ¸ ì†Œê°œ
- ê¸°íš ì˜ë„
> ìƒˆ íœ´ëŒ€í°ì„ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ ë§‰ëŒ€í•œ ìì›ê³¼ ì—ë„ˆì§€ê°€ ë“¤ì–´ê°„ë‹¤ëŠ” ê²ƒì„ ì•Œê³  ê³„ì‹ ê°€ìš”?  
> ë¶€í’ˆê³¼ ì™„ì„±í’ˆì´ ì´ë™í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ì‚°í™”íƒ„ì†Œì™€ ë¯¸ì„¸ë¨¼ì§€ê°€ ë°œìƒí•˜ë©°, íœ´ëŒ€í° ìƒì‚°ì— ê¼­ í•„ìš”í•œ í¬ê·€ ê¸ˆì†ë“¤ì€ ìƒíƒœê³„ë¥¼ ìœ„í˜‘í•œë‹¤ê³  í•©ë‹ˆë‹¤.  
> ì‹¤ë¡€ë¡œ íœ´ëŒ€í° ë¶€í’ˆì— ê¼­ í•„ìš”í•œ í¬ê·€ê¸ˆì†ì¸ ì½œíƒ„ì€, ê´‘ì‚°ì˜ ìœ„ì¹˜ê°€ ê³ ë¦´ë¼ì˜ ì„œì‹ì§€ì™€ ê±°ì˜ ê²¹ì³ìˆê¸° ë•Œë¬¸ì— ì´ ê¸ˆì†ì„ ì±„êµ´í•˜ëŠ” ê³¼ì •ì—ì„œ ì„œì‹ì§€ íŒŒê´´ë‚˜ ë¬´ë¶„ë³„í•œ ì‚¬ëƒ¥ë“±ìœ¼ë¡œ ì¸í•´ ê³ ë¦´ë¼ê°€ ë©¸ì¢…ìœ„ê¸°ì— ì²˜í•´ ìˆìŠµë‹ˆë‹¤.  
> ë”°ë¼ì„œ ìƒˆë¡œìš´ íœ´ëŒ€í°ì„ êµ¬ì…í•˜ê¸°ë³´ë‹¤ ì¤‘ê³ í°ì„ ì‚¬ìš©í•˜ì—¬ íœ´ëŒ€í°ì˜ êµì²´ì‹œê¸°ë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì´ ì—¬ëŸ¬ëª¨ë¡œ í™˜ê²½ ë³´í˜¸ì— ë„ì›€ì´ ëœë‹¤ê³  í•©ë‹ˆë‹¤.
>
> ë˜í•œ ë¹ ë¥´ê²Œ ë°œì „í–ˆë˜ ìŠ¤ë§ˆíŠ¸í° ì„±ëŠ¥ì´ ì •ì²´ê¸°ì— ì ‘ì–´ë“¤ë©´ì„œ ì‚¬ìš©ìê°€ ì²´ê°í•˜ëŠ” ìŠ¤ë§ˆíŠ¸í° ì„±ëŠ¥ê³¼ ë””ìì¸ì´ í‰ì¤€í™” ë˜ì—ˆê³ , 
> ë²ˆê°œì¥í„° Â· ë‹¹ê·¼ë§ˆì¼“ Â· ì¤‘ê³ ë‚˜ë¼ ë“± ì¤‘ê³ ë§¤ë§¤ í”Œë«í¼ì´ ëŠ˜ì–´ë‚˜ë©´ì„œ ì¤‘ê³ ê±°ë˜ì— ëŒ€í•œ ì¸ì‹ì´
> ê°œì„ ë˜ì–´ ì¤‘ê³ í° ì‹œì¥ì´ ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤.
>
> ì €í¬ëŠ” ì´ì™€ê°™ì´ í™˜ê²½ì ì¸ ë¶€ë¶„ê³¼ ì¤‘ê³ í° ì‹œì¥ì´ ê¸‰ì„±ì¥ í•˜ê³ ìˆëŠ” ì ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ì–»ì–´
> ì¤‘ê³ í° ê±°ë˜ ì‚¬ì´íŠ¸ì¸ ë„¤ì´ì²˜í°ì„ ê¸°íší•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.  

- ì°¸ê³  ì‚¬ì´íŠ¸ : ì„¸í‹°ì¦Œ https://www.cetizen.com
- ERD : https://www.erdcloud.com/d/TaMuGbzETtf6HtD6z
- ì°¸ì—¬ ì¸ì› : 5ëª… (ì°¸ì—¬ë„ : 100% / ê¸°ì—¬ë„ : 30%)
- ì£¼ìš” ê¸°ëŠ¥ ë° ë‹´ë‹¹ ì—­í• (âœ”)

|âœ”ê³„ì •ê´€ë¦¬|âœ”ë§ˆì´í˜ì´ì§€1|ë§ˆì´í˜ì´ì§€2|ë§ˆì¼“|ì»¤ë®¤ë‹ˆí‹°|í¸ì˜ê¸°ëŠ¥|ì„œë¹„ìŠ¤|ê´€ë¦¬ì|âœ”ê¸°íƒ€|
|---|---|---|---|---|---|---|---|---|
|<pre style="font-size:10px">ë¡œê·¸ì¸<br>íšŒì›ê°€ì…<br>ì•„ì´ë””ì°¾ê¸°<br>ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</pre>|<pre style="font-size:10px">íšŒì›ì •ë³´ ìˆ˜ì •<br>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½<br>íšŒì› íƒˆí‡´<br>ë‚˜ì˜ ê²Œì‹œê¸€ ì¡°íšŒ<br>ë‚˜ì˜ ëŒ“ê¸€ ì¡°íšŒ<br>ìª½ì§€í•¨</pre>|<pre style="font-size:10px">ë‚˜ì˜ íŒë§¤ë‚´ì—­<br>ë‚˜ì˜ êµ¬ë§¤ë‚´ì—­<br>ê´€ì‹¬ìƒí’ˆ<br>ê±°ë˜ì§„í–‰ìƒíƒœ<br>ë°˜í’ˆ/ì·¨ì†Œ</pre>|<pre style="font-size:10px">ë¬¼í’ˆê²€ìƒ‰<br>ë¬¼í’ˆë“±ë¡<br>ì¥ë°”êµ¬ë‹ˆ</pre>|<pre style="font-size:10px">ëª¨ë°”ì¼ë‰´ìŠ¤<br>ììœ ê²Œì‹œíŒ<br>íšŒì›ì„¤ë¬¸</pre>|<pre style="font-size:10px">ì‚¬ì–‘ë¹„êµ</pre>|<pre style="font-size:10px">ê³µì§€ì‚¬í•­</pre>|<pre style="font-size:10px">íšŒì›ê´€ë¦¬<br>ê²Œì‹œê¸€ê´€ë¦¬<br>ì‹ ê³ ê´€ë¦¬</pre>|<pre style="font-size:10px">ìª½ì§€ë³´ë‚´ê¸°<br>ì‹ ê³ í•˜ê¸°</pre>|

- ê°œë°œ ì¼ì • : 2021ë…„ 5ì›” 21ì¼ ~ 6ì›” 18ì¼
- ê°œë°œ í™˜ê²½
  - Language : Java 8, HTML5, CSS, JavaScript
  - OS : Window 10
  - IDE : Eclipse, SQL developer, Visual Studio Code
  - Framework : Spring Tool Suite(STS), MyBatis, JDBC 8.0
  - SDK : JDK 1.8, JSP
  - RDBMS : Oracle
  - Server : Apache Tomcat 8.5
  - Library : jQuery, Ajax, Bootstrap 5, Scribe OpenSource OAuth Java Library, Spring Security, Apache Commons-Email
  - API : ë‹¤ìŒ ì£¼ì†Œ API
  - í˜‘ì—… ë„êµ¬ : GitHub, Slack
------------

## ë‹´ë‹¹ ê¸°ëŠ¥ êµ¬í˜„ í™”ë©´
**1. ë¡œê·¸ì¸ í˜ì´ì§€**
> ![ë¡œê·¸ì¸](https://user-images.githubusercontent.com/75263831/127144878-53197978-14f4-4993-a89c-b245fbb7c833.png)<br><br>  

**2. íšŒì›ê°€ì…** 
 
> - íšŒì› ê°€ì… 1ë‹¨ê³„ : ì•½ê´€ ë™ì˜ í˜ì´ì§€
>  
> ![007](https://user-images.githubusercontent.com/75263831/126876033-03ec65a8-a999-4a42-bf65-84ba02dc4350.png)<br><br>  
>
> - íšŒì› ê°€ì… 2ë‹¨ê³„ : ì‚¬ìš©ì ì •ë³´ ì…ë ¥ í˜ì´ì§€
>   - Spring Security ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© : íšŒì› ê°€ì… ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”  
>   - Apache Commons Email ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© : íšŒì› ê°€ì… ì¤‘ ì´ë©”ì¼ì„ ì¸ì¦í•˜ê¸° ìœ„í•´ ì‚¬ìš©  
>  
> ![008](https://user-images.githubusercontent.com/75263831/126876036-3bb45395-ab0e-4c79-a055-ab868118ce3a.png)<br><br>  


**3. ì•„ì´ë”” ì°¾ê¸° / ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€**
> ![ì•„ì´ë””,ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°](https://user-images.githubusercontent.com/75263831/127117195-7a36db3e-6e16-4853-8947-c31eb1a6a60d.png)<br><br>  

**4. íšŒì›ì •ë³´ í˜ì´ì§€**
> ![íšŒì›ì •ë³´](https://user-images.githubusercontent.com/75263831/127156355-d92e42d8-ea13-40ef-aa22-08f1c4bb9acf.png)
> - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
> ![ë¹„ë°€ë²ˆí˜¸ ë³€ê²½](https://user-images.githubusercontent.com/75263831/127156382-422406bd-ec58-4376-bf5b-359447b53982.png)
> - íšŒì› íƒˆí‡´
> ![íƒˆí‡´í•˜ê¸°](https://user-images.githubusercontent.com/75263831/127156394-fb36736d-eab9-4156-a3e3-4c3d5afe5926.png)

**5. ë‚˜ì˜ ê²Œì‹œê¸€ / ë‚˜ì˜ ëŒ“ê¸€ í˜ì´ì§€**
> ![ë‚˜ì˜ê²Œì‹œê¸€ë‚˜ì˜ëŒ“ê¸€](https://user-images.githubusercontent.com/75263831/127359611-f52afeec-31b0-44cd-ac3b-5252d7ade0e8.png)<br><br>  

**6. ìª½ì§€ ê¸°ëŠ¥**
> - ìª½ì§€ë³´ë‚´ê¸°
> ![ìª½ì§€ë³´ë‚´ê¸°](https://user-images.githubusercontent.com/75263831/127359693-863f7f39-8c90-424e-a984-d339574253f4.png)
> - ë³´ë‚¸ ìª½ì§€í•¨
> ![ë³´ë‚¸ìª½ì§€í•¨](https://user-images.githubusercontent.com/75263831/127359730-225f6a83-7d09-439b-8116-f80e51295406.png)  
> - ë°›ì€ ìª½ì§€í•¨
> ![ë°›ì€ ìª½ì§€í•¨](https://user-images.githubusercontent.com/75263831/127359718-efa43aea-5710-4a54-83ea-5666b68f1ba5.png)


**7. ì‹ ê³ í•˜ê¸°**
>![ì‹ ê³ í•˜ê¸°](https://user-images.githubusercontent.com/75263831/127026503-5f33ca0d-c1f6-4edb-812f-5918bc1dd004.png)<br><br>  


------------

## íŒ¨í‚¤ì§€ë³„ êµ¬í˜„ ê¸°ëŠ¥  

1. com/kh/naturephone/admin : ê´€ë¦¬ìê°€ íšŒì›ë“¤ì„ ê´€ë¦¬(ë“±ê¸‰ ë³€ê²½, ê°•ì œ íƒˆí‡´, ê²Œì‹œê¸€ ê´€ë¦¬)í•˜ëŠ” íŒ¨í‚¤ì§€

2. com/kh/naturephone/boardFree : ììœ  ê²Œì‹œíŒì˜ CRUD ê¸°ëŠ¥ íŒ¨í‚¤ì§€

3. com/kh/naturephone/boardMobile : ëª¨ë°”ì¼ë‰´ìŠ¤ ê²Œì‹œíŒì˜ CRUD ê¸°ëŠ¥ íŒ¨í‚¤ì§€

4. com/kh/naturephone/boardSurvey : íšŒì› ì„¤ë¬¸ ê²Œì‹œíŒì˜ CRUD ê¸°ëŠ¥ íŒ¨í‚¤ì§€

5. com/kh/naturephone/common : ê³µí†µ í˜ì´ì§• ì²˜ë¦¬ì™€ ê²€ìƒ‰ ê¸°ëŠ¥ íŒ¨í‚¤ì§€

6. com/kh/naturephone/goods : ìƒí’ˆì„ ë“±ë¡, ê²€ìƒ‰, êµ¬ë§¤, ì¥ë°”êµ¬ë‹ˆì— ë„£ê¸° ê¸°ëŠ¥ íŒ¨í‚¤ì§€

7. **[com/kh/naturephone/member : íšŒì›ì •ë³´ì˜ CRUD ê´€ë¦¬ì™€ ì‚¬ìš©ìê°€ ì ì€ ê²Œì‹œê¸€/ëŒ“ê¸€ ì¡°íšŒ ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€](./src/main/java/com/kh/naturephone/member)**
> - ë¡œê·¸ì¸
>   - ì‚¬ì´íŠ¸ ìì²´ ë¡œê·¸ì¸
>   - ë„¤ì´ë²„ ê°„í¸ ë¡œê·¸ì¸
> - íšŒì›ê°€ì…
>   - ì•„ì´ë”” ì¤‘ë³µ í™•ì¸
>   - ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
>   - ì´ë©”ì¼ ì¸ì¦, ì´ë©”ì¼ ì¸ì¦í‚¤ ì…ë ¥ í™•ì¸
> - ì•„ì´ë”” ì°¾ê¸°(ì´ë©”ì¼ ì „ì†¡)
> - ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°(ì´ë©”ì¼ ì „ì†¡)
> - ë§ˆì´í˜ì´ì§€
>   - íšŒì› ì •ë³´ ìˆ˜ì •
>   - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
>   - íšŒì› íƒˆí‡´
>   - ë‚˜ì˜ ê²Œì‹œê¸€ ì¡°íšŒ
>   - ë‚˜ì˜ ëŒ“ê¸€ ì¡°íšŒ


8. **[com/kh/naturephone/message : ë³´ë‚¸ ìª½ì§€í•¨ê³¼ ë°›ì€ ìª½ì§€í•¨, ìª½ì§€ ë³´ë‚´ê¸°ì™€ ìª½ì§€ ì‚­ì œë¥¼ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€](./src/main/java/com/kh/naturephone/message)**
> - ìª½ì§€í•¨
>   - ìª½ì§€ ìƒì„¸
>   - ë°›ì€ ìª½ì§€í•¨ê³¼ ë³´ë‚¸ ìª½ì§€í•¨ì˜ í˜ì´ì§• ì²˜ë¦¬
>   - ìª½ì§€í•¨ ê²€ìƒ‰ (ì œëª©, ë‚´ìš©, ì•„ì´ë””), í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•œ ë¦¬ìŠ¤íŠ¸ì˜ í˜ì´ì§• ì²˜ë¦¬
> - ìª½ì§€ ë³´ë‚´ê¸°
> - ìª½ì§€ ì‚­ì œ


9. com/kh/naturephone/myPage2 : ì‚¬ìš©ìì˜ íŒë§¤ë‚´ì—­, êµ¬ë§¤ë‚´ì—­, ê´€ì‹¬ìƒí’ˆ, ê±°ë˜ì§„í–‰ ìƒíƒœ, ë°˜í’ˆ/ì·¨ì†Œë¥¼ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€

10. com/kh/naturephone/notice : ê³µì§€ì‚¬í•­ ê²Œì‹œíŒì˜ CRUD ê¸°ëŠ¥ íŒ¨í‚¤ì§€

11. **[com/kh/naturephone/report : ì‹ ê³ í•˜ê¸° ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€](./src/main/java/com/kh/naturephone/report)**
> - ì‹ ê³ í•˜ê¸°

12. com/kh/naturephone/support : íœ´ëŒ€í° ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€

------------
## ê¸°ëŠ¥ êµ¬í˜„ì˜ ê³ ë¯¼ì ê³¼ í•´ê²° ê³¼ì •
<details markdown="1">
<summary>ì ‘ê¸°/í¼ì¹˜ê¸°</summary>  
<br>

**ğŸš© íšŒì›ê°€ì… ì¤‘ ì´ë©”ì¼ ì¸ì¦**

íšŒì›ê°€ì… ì¤‘ ì´ë©”ì¼ ì¸ì¦ì„ ì–´ë–»ê²Œ ì ‘ê·¼í•´ì•¼ í• ì§€ ê³ ë¯¼í•˜ëŠ” ì‹œê°„ì´ ê¸¸ì–´ì¡Œê³ , êµ¬í˜„ ê¸°ê°„ì˜ ì´ˆë°˜ì´ì—¬ì„œ ë‹¤ë¥¸ ê¸°ëŠ¥ë“¤ì´ ë§ì´ ë‚¨ì•„ìˆì—ˆë‹¤.  
ë”°ë¼ì„œ ì¼ë‹¨ íšŒì›ê°€ì… í›„ ì¸ì¦í•  ìˆ˜ ìˆê²Œ ì™„ì„±ì„ í•´ë‘ê³  ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ë‹¤ë¥¸ ì¤‘ìš” ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•œ ë‹¤ìŒ, ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ê¸°ê°„ ë‚´ì— ê¸°íší–ˆë˜ëŒ€ë¡œ ê¸°ëŠ¥ì„ ì™„ì„±í–ˆë‹¤.


- ë³€ê²½ ì „ : íšŒì›ê°€ì… ì™„ë£Œ â†’ ì´ë©”ì¼ ë°œì†¡ â†’ í™•ì¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì¸ì¦ â†’  ë¡œê·¸ì¸
> 
> íšŒì›ê°€ì… í›„ ì´ë©”ì¼ì´ ë³´ë‚´ì§€ê³  ì¸ì¦ ì´ë©”ì¼ ì•ˆì˜ í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ memberApproval ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬   
> íšŒì› ì¸ì¦ìƒíƒœì¸ APPROVAL_STATUS ì»¬ëŸ¼ì„ 'Y'ë¡œ update í•˜ê¸°.  
> ë¡œê·¸ì¸ í•  ë•Œ APPROVAL_STATUS ìƒíƒœë¥¼ í™•ì¸í•œ í›„ 'N'ê°€ ì•„ë‹ˆë¼ë©´ ë¡œê·¸ì¸ì´ ê°€ëŠ¥. 
 
```java

@RequestMapping("/member")
public String memberLogin(@ModelAttribute Member m, Model model) {
  if (loginUser != null && bcryptPasswordEncoder.matches(m.getPwd(), loginUser.getPwd())) {

			if(loginUser.getApprovalStatus().equals("N")) {
				model.addAttribute("msg", "ì´ë©”ì¼ ì¸ì¦ì„ í•˜ì‹  í›„ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
				return "member/loginPage";
			} else {
				model.addAttribute("loginUser", loginUser);
				return "redirect:/";
			}
      
  } else {
		model.addAttribute("msg", "ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
		return "member/loginPage";
  }
}
```

- ë³€ê²½ í›„ : ì´ë©”ì¼ ë°œì†¡ â†’ ì¸ì¦í‚¤ ì…ë ¥ â†’ íšŒì›ê°€ì… ì™„ë£Œ â†’ ë¡œê·¸ì¸
> controllerì—ì„œ ë©”ì¼ ì¸ì¦ì„ ìš”ì²­ ë°›ìœ¼ë©´ ë¨¼ì € KeyPublishê°ì²´ë¡œ ì¸ì¦í‚¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì¸ì¦í‚¤ë¥¼ sessionì— ë‹´ìŒ.  
> MailUtil í´ë˜ìŠ¤ì˜ sendMail ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë©”ì¼ì£¼ì†Œì™€ ë©”ì¼ ì œëª©, ë‚´ìš©ì„ ë§¤ê°œë³€ìˆ˜ì— ëŒ€ì…í•˜ì—¬ ì´ë©”ì¼ì„ ë³´ëƒ„.  
> ë©”ì¼ì„ í™•ì¸í•˜ì—¬ ì¸ì¦í‚¤ë¥¼ ì…ë ¥í•˜ê³ , ê·¸ ê°’ì„ sessionê°’ê³¼ ë¹„êµí•´ì„œ ì¼ì¹˜í•˜ë©´ ì¸ì¦ì´ ì™„ë£Œ.

```java

// 3-1. ë©”ì¼ ì¸ì¦ ë©”ì†Œë“œ (Ajax)
@RequestMapping(value = "/joinSendMail", method = RequestMethod.POST)
@ResponseBody
public void joinSendMail(@ModelAttribute Member m, HttpSession session) throws Exception {
    
    // ì¸ì¦í‚¤ ìƒì„±
		String keyCode = KeyPublish.createKey();

		session.setAttribute("keyCode", keyCode);

		String subject = "";
		String msg = "";

		// íšŒì›ê°€ì… ë©”ì¼ ë‚´ìš©
		subject = "Nature Phone íšŒì›ê°€ì… ì¸ì¦ ì½”ë“œì…ë‹ˆë‹¤.";
		msg += "<div align='center' style='border:1px solid black; font-family:verdana'>";
		msg += "<div style='font-size: 130%'>";
		msg += "íšŒì›ê°€ì… í˜ì´ì§€ì—ì„œ ì¸ì¦ì½”ë“œ <strong>";
		msg += keyCode + "</strong> ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div><br/>";

		MailUtil.sendMail(m.getEmail(), subject, msg);

}

// 3-2. ë©”ì¼ ì¸ì¦í‚¤ í™•ì¸ ë©”ì†Œë“œ(Ajax)
@RequestMapping(value = "/keyCheck", method = RequestMethod.POST)
@ResponseBody
public String keyCheck(@RequestParam("modalInput") String key, 
						   @SessionAttribute("keyCode") String keyCode) {
		
		if (key != null && key.equals(keyCode)) {
			return "success";
		} else {
			return "false";
		}
}
  
```


**ğŸš© ìª½ì§€ ì„ íƒ ì‚­ì œ**

Q. ì„ íƒ ëœ ìª½ì§€ë“¤ì„ viewë‹¨ì—ì„œ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì„œ controllerë‹¨ìœ¼ë¡œ ë„˜ê¸¸ê¹Œ?  
â†’ each() ë©”ì„œë“œë¥¼ ì´ìš©í•´ ì²´í¬ ëœ ê°’ë“¤ì„ ì°¾ì•„ ì°¨ë¡€ë¡œ ë°°ì—´ì— ë‹´ì•„ Ajax í†µì‹ ìœ¼ë¡œ ë„˜ê¸´ë‹¤.  

```java
// view
/*---------------- ì‚­ì œë²„íŠ¼ ëˆŒë €ì„ ë•Œ ----------------*/
		function deleteMessage(){
    		var type = "${ message.type }";	
    		var ckArr = [];					
        	$("input[name=checkRow]:checked").each(function(){
        		var chk = $(this).val();
        		ckArr.push(chk);
        	})
        		
        	// ìª½ì§€ê°€ ì„ íƒ ë˜ì§€ ì•Šì•˜ì„ ë•Œ
        	if(ckArr.length == 0){
        		alert("ì‚­ì œí•  ìª½ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
        	
        	// ìª½ì§€ê°€ ì„ íƒ ë˜ì—ˆë‹¤ë©´
        	} else{
        		// ì •ë§ ì‚­ì œí•  ê²ƒì¸ì§€ í™•ì¸
	        	if(confirm("ì„ íƒ ëœ ìª½ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == true) {
	        		$.ajax({
	        			type : 'POST',
	        			url : "${ contextPath }/message/delete",
	        			data:{ "ckArr" : ckArr, "type" : type },
	        			dataType: "text",
	                    success: function(data) {
	                    	if(data == 'success'){
	                    		location.reload();
	                        	alert("ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
	                    	} else {
	                    		alert("ì‚­ì œ ì‹¤íŒ¨.");
	                    	}
	                    },
	                    error: function(e){
	                        alert("error code : " + e.status + "\n"
	                                + "message : " + e.responseText);
	                    }        
	        		});
	        	
	        	// ì·¨ì†Œ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ	í˜ì´ì§€ reload
	        	} else {	
	        		location.reload(true);
	        	}
        	}
    	}
```


Q. controllerë¡œ ë“¤ì–´ì˜¨ ë°°ì—´ì„ ì–´ë–»ê²Œ ë°›ì•„ì„œ ì²˜ë¦¬ í•´ì•¼í• ê¹Œ?  
â†’ ë°°ì—´ì€ @RequestParam(value="parameterì´ë¦„[]")List&lt;String&gt; í˜•ì‹ìœ¼ë¡œ ë°›ì•„ì™€ì•¼ í•œë‹¤.  
â†’ ì—¬ê¸°ì„œ ë°°ì—´ì— ë“¤ì–´ìˆëŠ” ë°ì´í„°ëŠ” ìª½ì§€ê³ ìœ ë²ˆí˜¸, ì¦‰ intí˜•ì´ë¯€ë¡œ List&lt;Integer&gt;í˜•ìœ¼ë¡œ ë°›ì•„ ì™”ë‹¤.  
â†’ ArrayListë¥¼ í•˜ë‚˜ ì„ ì–¸í•˜ê³ (deleteArray) forë¬¸ì„ ëŒë ¤ì„œ ë°›ì•„ì˜¨ ìª½ì§€ê³ ìœ ë²ˆí˜¸ë¥¼ í•˜ë‚˜í•˜ë‚˜ ë‹´ëŠ”ë‹¤.

```

// controller
// 4. ìª½ì§€ ì‚­ì œ(Ajax)
	@RequestMapping(value = "/delete", method = RequestMethod.POST)
	public @ResponseBody String messageDelete(@RequestParam(value="ckArr[]") List<Integer> deleteList,
											  @RequestParam(value="type") String type) {
		
		ArrayList<Integer> deleteArray = new ArrayList<Integer>();
		for(int i=0; i < deleteList.size(); i++) {
			deleteArray.add(deleteList.get(i));
		}
		
		HashMap<String, Object> map = new HashMap<String, Object>();
		map.put("type", type);
		map.put("deleteArray", deleteArray);
		
		int result = mService.messageDelete(map);
		
		if(result > 0) {
			return "success";
		} else {
			return "error";
		}
	}

```

Q. controllerì—ì„œ ì „ë‹¬í•œ ì—¬ëŸ¬ê°œì˜ ìª½ì§€ë“¤ì„ DBì—ì„œ ì–´ë–»ê²Œ ì‚­ì œí• ê¹Œ?  
â†’ ë™ì ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸°(Mybatisì˜ foreachë¬¸ ì‚¬ìš©).    
1. ë¨¼ì € ë¦¬ìŠ¤íŠ¸/ë°°ì—´ ë³€ìˆ˜ ê°’ì„ collectionì— ë„£ì–´ì£¼ê³ , itemì´ë¼ëŠ” ì„¤ì •ìœ¼ë¡œ ë³„ì¹­ ì„¤ì •ì„ í•´ì¤€ë‹¤.

2. ë¦¬ìŠ¤íŠ¸/ë°°ì—´ì˜ ê°’ì´ ì‹œì‘í•˜ê¸° ì „ open="(" ì´ ì„¤ì •ë¼ìˆìœ¼ë¯€ë¡œ'(' (ì—´ë¦° ê´„í˜¸)ê°€ ì—´ë¦¬ê²Œ ë˜ê³ 

3. ë¦¬ìŠ¤íŠ¸/ë°°ì—´ì˜ ê°’ì´ í•œ ë²ˆì”© ë°˜ë³µë¬¸ì„ ê±°ì¹  ë•Œë§ˆë‹¤ separator ì˜µì…˜ì— ìˆëŠ” ', '(ì½¤ë§ˆ)ê°€ ì°íˆê²Œ ëœë‹¤.

4. ë°˜ë³µì´ ëë‚˜ë©´ close=")" ì„¤ì •ì´ ìˆìœ¼ë¯€ë¡œ ')' (ë‹«íŒ ê´„í˜¸)ê°€ ì“°ì¸ë‹¤.
	
```
// Mapper
<!-- 5. ìª½ì§€ ì‚­ì œ -->
	<update id="messageDelete" parameterType="hashmap">
	<choose>
		<when test="type == 'ë°›ì€ ìª½ì§€í•¨'">
		UPDATE		MESSAGE_TB
		SET 		SENDER_STATUS = 'N'
		WHERE 		MSG_NO IN
		<foreach collection="deleteArray" item="item" index="index" separator="," open="(" close=")">
		 #{ item }
		</foreach>
		</when>
		
		<when test="type == 'ë³´ë‚¸ ìª½ì§€í•¨'">
		UPDATE		MESSAGE_TB
		SET 		RECIPIENT_STATUS = 'N'
		WHERE 		MSG_NO IN
		<foreach collection="deleteArray" item="item" index="index" separator="," open="(" close=")">
		 #{ item }
		</foreach>
		</when>
	</choose>
	</update>

```
	
</details>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
	<resultMap type="Board_TB" id="boardResultSet">
		<id property="bno" column="B_NO"/>
		<result property ="userNo" column="USER_NO"/>
		<result property ="btitle" column="BTITLE"/>
		<result property ="bcontent" column="BCONTENT"/>
		<result property ="category" column="CATEGORY"/>
		<result property ="bcategory" column="BCATEGORY"/>
		<result property ="bcount" column="BCOUNT"/>
		<result property ="brecom" column="BRECOM"/>
		<result property ="bcreateDate" column="B_CREATE_DATE"/>
		<result property ="bmodifyDate" column="B_MODIFY_DATE"/>
		<result property ="bstatus" column="B_STATUS"/>
		<result property ="brefNo" column="B_REF_NO"/>
	</resultMap>

	
	<select id="selectListCount" resultType="_int">
		SELECT 
				COUNT(*)
		  FROM
				BOARD_TB
		 WHERE
				B_STATUS = 'Y'				
	</select>
	
	<select id="selectList" resultMap="boardResultSet">
		SELECT
				B_NO
			  , USER_NO
			  , BTITLE
			  , BCONTENT
			  , CATEGORY
			  , BCATEGORY
			  , BCOUNT
			  , BRECOM
			  , B_CREATE_DATE
			  , B_MODIFY_DATE
			  , B_STATUS
			  , B_REF_NO
		 FROM
				BOARD_TB
		WHERE
				B_STATUS= 'Y'
	 ORDER BY
				B_NO DESC		  	
	</select>
	
	<insert id="insertBoard" parameterType="Board_TB">
		INSERT
		  INTO BOARD_TB
		 (
				B_NO
			  , USER_NO
			  , BTITLE
			  , BCONTENT
			  , CATEGORY
			  , BCATEGORY
			  , BCOUNT
			  , BRECOM
			  , B_CREATE_DATE
			  , B_MODIFY_DATE
			  , B_STATUS
			  , B_REF_NO
		)
		VALUES
		(
			  SEQ_B_NO.NEXTVAL
			, #{userNo} 
			, #{btitle}
			, #{bcontent}
			, #{category}
			, #{bcategory}
			, DEFAULT
			, DEFAULT
			, SYSDATE
			, SYSDATE
			, DEFAULT
			, #{brefNo}
		)
	</insert>
	
	<insert id="insertBoardAtt" parameterType="B_Att_TB">
		INSERT
		  INTO B_ATT_TB
		 (
				BF_NO
			  , BF_ORIGINAL_NAME
			  , BF_RENAME_NAME
			  , BF_FILEPATH
			  , BF_UPLOAD_DATE
			  , BF_STATUS
			  , B_NO
		)
		VALUES
		(
			  SEQ_BF_NO.NEXTVAL
			, #{bforiginalName} 
			, #{bfrenameName}
			, #{bcontent}
			, #{bffilePath}
			, SYSDATE
			, DEFAULT
			, SEQ_B_NO.CURRVAL
		)
	</insert>






</mapper>




















